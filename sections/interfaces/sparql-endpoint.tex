\section{SPARQL endpoint}
\label{sec:impl_sparql_endpoint}
De laatste bron om te testen is meteen de moeilijkste. Bij het SPARQL \textit{endpoint} is het de bedoeling dat een GeoSPARQL query uitgevoerd kan worden door de gegevens op te vragen aan dit SPARQL \textit{endpoint}. Comunica zelf is gemaakt om queries uit te voeren over RDF-bronnen, wat het zeer handig maakt om SPARQL queries uit te voeren. Hierdoor lijkt het logisch om de query in zijn geheel door te sturen in het geval van een SPARQL \textit{endpoint} als bron. Dit SPARQL \textit{endpoint} is namelijk in staat om volledig automoon een antwoord te geven op de query. Dit is echter niet hoe het in zijn werk gaat. Eén van de redenen hiervoor is dat gefedereerd queryen niet mogelijk zou zijn wanneer er naast het SPARQL \textit{endpoint} nog een andere bron zou zijn. Zo moet het samenvoegen van de antwoorden op de client gebeuren. 

Bij een SPARQL \textit{endpoint} zal de \textit{query engine} de verschillende RDF-triples van de query overlopen. Dit doet hij in twee stappen. De eerste stap is een ``count'', zodat hij weet hoeveel RDF-triples van de bron overeen komen met de RDF-triples van de query. Zo weet de \textit{query engine} welke volgorde optimaal is om de data op te halen, zodat hij dit optimaal kan joinen. De tweede stap is het effectieve ophalen van het resultaat, waarbij hij dus alle antwoorden vraagt die voldoen aan slechts één RDF-triple van de query. Wanneer dit voor alles gedaan is, zoekt hij het kleinste patroon, zodat hij vervolgens de matchende RDF-triples kan ophalen. Het kleinste patroon wordt gekozen om het aantal matchende resultaten te minimaliseren voor performantie redenen.

Op deze wijze wordt uiteindelijk alle benodigde informatie uit het SPARQL \textit{endpoint} systematisch opgehaald, zodat de filter bij de oorspronkelijke query onafhankelijk van de bronnen kan uitgevoerd worden. Dit betekent dat de filterfuncties steeds dezelfde implementatie hebben (namelijk deze van de \textit{query engine} op de client, niet deze van de bron). Dit laat toe om te filteren met de GeoSPARQL functies. Dankzij deze werkwijze is het effectief mogelijk om de GeoSPARQL functionaliteit toe te passen bij het opvragen aan een SPARQL \textit{endpoint}.